<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intelligent Contract Risk Analysis</title>
    <!-- Use Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h2>‚öñÔ∏è Contract Risk AI</h2>
          <p>Intelligent Legal Analysis</p>
        </div>

        <hr />

        <div class="status-panel">
          <p class="section-label">System Status</p>
          <div class="status-grid">
            <div class="status-card">
              <span class="card-label">Risk Engine</span>
              <span class="card-value status-live">‚óè LIVE</span>
            </div>
            <div class="status-card">
              <span class="card-label">Agent Node</span>
              <span class="card-value status-standby">‚óã M2</span>
            </div>
          </div>
        </div>

        <div class="upload-section">
          <p class="section-label">Upload Document</p>
          <input type="file" id="fileInput" accept=".pdf,.txt" />
          <button id="analyzeBtn" class="btn-primary">Analyze Document</button>
        </div>

        <div class="pipeline-info">
          <p class="section-label">Pipeline</p>
          <p>‚Ä∫ spaCy v3.7 ‚Äî Lemmatization</p>
          <p>‚Ä∫ TF-IDF ‚Äî Feature Vectorization</p>
          <p>‚Ä∫ Logistic Reg. ‚Äî Classifier</p>
        </div>

        <hr />
        <p class="sidebar-footer">
          Model artifacts loaded from <code>artifacts/</code>
        </p>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <header class="main-header">
          <h1>Intelligent Contract Risk Analysis</h1>
          <p class="subtitle">
            Clause-level risk assessment using classical NLP ‚Äî TF-IDF ¬∑ Logistic
            Regression ¬∑ spaCy
          </p>
          <p class="governance-warning">
            Governance: Model assessments highlight linguistic risk patterns and
            are intended to assist, not replace, professional legal review.
          </p>
        </header>

        <hr />

        <!-- Loading State -->
        <div id="loadingState" class="hidden">
          <div class="spinner"></div>
          <p>Analyzing document structure and linguistic risk vectors...</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden error-box"></div>

        <!-- Onboarding State -->
        <div id="onboardingState" class="onboarding">
          <div class="icon-large">‚öñÔ∏è</div>
          <h2>Upload a Legal Document to Begin</h2>
          <p>
            Use the sidebar to upload a PDF or TXT contract. The system will
            segment, vectorize, and classify each provision automatically.
          </p>

          <div class="feature-grid">
            <div class="feature-card">
              <div class="feature-icon">üîç</div>
              <h3>Structural Segmentation</h3>
              <p>
                Splits the document into discrete legal clauses with regex-based
                boundary detection.
              </p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üß†</div>
              <h3>Linguistic Risk Assessment</h3>
              <p>
                TF-IDF vectorization + Logistic Regression classifies each
                clause as High or Low risk.
              </p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">üí°</div>
              <h3>Trigger Extraction</h3>
              <p>
                Extracts the top weighted keywords that drove each risk
                prediction for explainability.
              </p>
            </div>
          </div>
        </div>

        <!-- Results State -->
        <div id="resultsState" class="hidden results-container">
          <div class="section-heading">
            <p class="section-title">Executive Summary</p>
            <p class="section-sub">
              Metrics derived from clause-level model predictions.
            </p>
          </div>

          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-label">Evaluated Clauses</div>
              <div class="kpi-value" id="kpiTotal" style="color: #4f8ef7">
                0
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">High-Risk Detections</div>
              <div class="kpi-value" id="kpiHighRisk" style="color: #f87171">
                0
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Risk Exposure Index</div>
              <div class="kpi-value" id="kpiExposure" style="color: #fbbf24">
                0%
              </div>
            </div>
            <div class="kpi-card">
              <div class="kpi-label">Mean Confidence</div>
              <div class="kpi-value" id="kpiConfidence" style="color: #4ade80">
                0%
              </div>
            </div>
          </div>

          <div class="section-heading" style="margin-top: 24px">
            <p class="section-title">Risk Analysis Workspace</p>
            <p class="section-sub">
              Clause-level assessments and linguistic risk triggers.
            </p>
          </div>

          <div id="clausesContainer" class="clauses-list">
            <!-- Javascript will populate this -->
          </div>
        </div>
      </main>
    </div>

    <script src="/static/app.js"></script>
  </body>
</html>
